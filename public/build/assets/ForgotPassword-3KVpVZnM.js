import{r as l,e as g,j as e,x as c,C as r,f as u}from"./app-17JNjqSJ.js";const j=()=>{const[p,x]=l.useState(1),[o,f]=l.useState({admission_number_or_email:"",password:"",password_confirmation:""}),[n,a]=l.useState(!1),[i,h]=l.useState(null),{errors:s}=g().props,m=t=>{f({...o,[t.target.name]:t.target.value})},y=t=>{t.preventDefault(),a(!0),u.post("/student/forgot-password/verify",{admission_number_or_email:o.admission_number_or_email},{onSuccess:d=>{h(d.props.studentInfo||d.props.data),x(2),a(!1)},onError:()=>{a(!1)},onFinish:()=>a(!1)})},b=t=>{t.preventDefault(),o.password===o.password_confirmation&&(o.password.length<6||(a(!0),u.post("/student/forgot-password/reset",o,{onSuccess:()=>{u.visit("/auth/student/login")},onError:()=>{a(!1)},onFinish:()=>a(!1)})))};return e.jsxs("div",{className:"min-h-screen bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-start mb-2",children:e.jsxs(c,{href:"/auth/student/login",className:"inline-flex items-center hover:underline text-sm font-medium",style:{color:r.primary.blue},children:[e.jsx("svg",{className:"h-5 w-5 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Back to Login"]})}),e.jsx(c,{href:"/",className:"flex justify-center",children:e.jsx("img",{src:"/images/G-LOVE ACADEMY.jpeg",alt:"G-LOVE ACADEMY Logo",className:"h-20 w-auto mx-auto"})}),e.jsx("h2",{className:"text-center text-3xl font-extrabold text-gray-900 mt-4",children:"Reset Your Password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:p===1?"Enter your admission number or email to verify your identity":"Create a new password for your account"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg border border-gray-200 sm:rounded-lg sm:px-10",children:[s&&Object.keys(s).length>0&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:Object.values(s).flat().map((t,d)=>e.jsx("p",{children:t},d))}),p===1?e.jsxs("form",{className:"space-y-6",onSubmit:y,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admission_number_or_email",className:"block text-sm font-medium text-gray-700",children:"Admission Number or Email"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"admission_number_or_email",name:"admission_number_or_email",type:"text",required:!0,value:o.admission_number_or_email,onChange:m,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm",style:{focusRingColor:r.primary.red,focusBorderColor:r.primary.red},placeholder:"Enter your admission number or email"})}),(s==null?void 0:s.admission_number_or_email)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.admission_number_or_email})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${n?"opacity-50 cursor-not-allowed":"hover:opacity-90"} transition-all duration-200`,style:{backgroundColor:r.primary.red,focusRingColor:r.primary.red},children:n?"Verifying...":"Verify Identity"})})]}):e.jsxs("form",{className:"space-y-6",onSubmit:b,children:[i&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Student:"})," ",i.first_name," ",i.last_name]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Admission Number: ",i.admission_number]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password",name:"password",type:"password",required:!0,minLength:6,value:o.password,onChange:m,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm",style:{focusRingColor:r.primary.red,focusBorderColor:r.primary.red},placeholder:"Enter your new password (min. 6 characters)"})}),(s==null?void 0:s.password)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"password_confirmation",name:"password_confirmation",type:"password",required:!0,minLength:6,value:o.password_confirmation,onChange:m,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 sm:text-sm",style:{focusRingColor:r.primary.red,focusBorderColor:r.primary.red},placeholder:"Confirm your new password"})}),(s==null?void 0:s.password_confirmation)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.password_confirmation})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{x(1),f({admission_number_or_email:o.admission_number_or_email,password:"",password_confirmation:""})},className:"flex-1 py-2 px-4 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Back"}),e.jsx("button",{type:"submit",disabled:n,className:`flex-1 py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${n?"opacity-50 cursor-not-allowed":"hover:opacity-90"} transition-all duration-200`,style:{backgroundColor:r.primary.red,focusRingColor:r.primary.red},children:n?"Resetting...":"Reset Password"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(c,{href:"/auth/student/login",className:"text-sm font-medium hover:underline",style:{color:r.primary.blue},children:"Remember your password? Sign in"})})]})})]})};export{j as default};
