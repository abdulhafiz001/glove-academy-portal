import{c as y,r as c,e as v,A as S,j as e,b as A,X as w,C as l,f as k,x as j}from"./app-17JNjqSJ.js";import{U as M}from"./users-BUbPeWYP.js";import{F as p}from"./file-text-Znh3F_nC.js";import{C as b}from"./calendar-BfCctGZ3.js";import{B as L}from"./book-open-D3qBa7nK.js";import{U as z}from"./user-CAmUnVMn.js";import{L as N,B as E}from"./log-out-Bc-nJCmd.js";import{M as U}from"./menu-BL5-W5Xp.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],O=y("layout-dashboard",_);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],C=y("settings",G);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],I=y("user-plus",D),B=()=>{var o;const[m,r]=c.useState(!1),{props:n}=v(),t=(o=n.auth)==null?void 0:o.user;c.useEffect(()=>{!t||t.role!=="admin"&&t.role!=="teacher"||x()},[t]);const x=async()=>{try{const i=(await S.getCurrentAcademicSession()).data||{};!i.has_session||!i.has_term?r(!0):r(!1)}catch{r(!0)}};if(!t||t.role!=="admin"&&t.role!=="teacher")return null;const h=()=>{r(!1),k.visit("/admin/settings")};return m?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"w-6 h-6 text-yellow-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Academic Session Required"})]}),e.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(w,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Before you can start using the platform, you need to set up an academic session and term."}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Action Required:"})," Please configure academic session and term in Settings."]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4",children:[e.jsx("p",{className:"text-sm text-blue-800",children:e.jsx("strong",{children:"What to do:"})}),e.jsxs("ol",{className:"text-sm text-blue-700 mt-2 ml-4 list-decimal space-y-1",children:[e.jsx("li",{children:"Go to Settings"}),e.jsx("li",{children:'Open the "Academic Sessions" tab'}),e.jsx("li",{children:"Create a new academic session (e.g., 2024/2025)"}),e.jsx("li",{children:"Set it as the current session"}),e.jsx("li",{children:"Set one of its terms as the current term"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end p-4 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 mr-3",children:"I'll do it later"}),e.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-white",style:{backgroundColor:l.primary.red},children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Go to Settings"]})]})]})}):null},T=({children:m})=>{var g;const[r,n]=c.useState(!1),[t,x]=c.useState(!1),{url:h,props:o}=v(),s=(g=o.auth)==null?void 0:g.user;if(c.useEffect(()=>{const a=()=>{x(window.innerWidth>=768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),!s)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:l.primary.red}})});const i=[{name:"Dashboard",href:(s==null?void 0:s.role)==="teacher"?"/teacher/dashboard":"/admin/dashboard",icon:O},{name:"Students",href:(s==null?void 0:s.role)==="teacher"?"/teacher/students":"/admin/students",icon:M},...(s==null?void 0:s.role)==="admin"||s!=null&&s.is_form_teacher?[{name:"Add Student",href:(s==null?void 0:s.role)==="teacher"?"/teacher/add-student":"/admin/add-student",icon:I}]:[],{name:"Manage Scores",href:(s==null?void 0:s.role)==="teacher"?"/teacher/manage-scores":"/admin/manage-scores",icon:p},...(s==null?void 0:s.role)==="teacher"?[{name:"Attendance",href:"/teacher/attendance",icon:b}]:[],...(s==null?void 0:s.role)==="admin"?[{name:"Classes",href:"/admin/classes",icon:L}]:[],{name:"Results",href:(s==null?void 0:s.role)==="teacher"?"/teacher/results":"/admin/results",icon:p},...(s==null?void 0:s.role)==="admin"?[{name:"Attendance Analysis",href:"/admin/attendance-analysis",icon:b},{name:"Settings",href:"/admin/settings",icon:C}]:[],{name:"Profile",href:(s==null?void 0:s.role)==="teacher"?"/teacher/profile":"/admin/profile",icon:z}],u=()=>{k.post("/logout")},d=a=>h===a;return e.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[!t&&r&&e.jsxs("div",{className:"fixed inset-0 flex z-40",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>n(!1)}),e.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:e.jsxs("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>n(!1),children:[e.jsx("span",{className:"sr-only",children:"Close sidebar"}),e.jsx(w,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})}),e.jsxs("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center px-4",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg flex items-center justify-center",style:{backgroundColor:l.primary.red},children:e.jsx("span",{className:"text-white font-bold text-sm",children:"G"})}),e.jsx("span",{className:"ml-2 text-lg font-bold text-gray-900",children:"G-LOVE ACADEMY"})]}),e.jsx("nav",{className:"mt-5 px-2 space-y-1",children:i.map(a=>{const f=a.icon;return e.jsxs(j,{href:a.href,className:`flex items-center px-2 py-2 text-sm font-medium rounded-md ${d(a.href)?"text-white":"text-gray-600 hover:bg-gray-100"}`,style:d(a.href)?{backgroundColor:l.primary.red}:{},onClick:()=>n(!1),children:[e.jsx(f,{className:"mr-3 h-5 w-5"}),a.name]},a.name)})})]}),e.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm",children:s!=null&&s.name?s.name.charAt(0).toUpperCase():"U"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:(s==null?void 0:s.name)||"Staff Member"}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(s==null?void 0:s.role)||"staff"})]}),e.jsx("button",{onClick:u,className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(N,{className:"h-5 w-5"})})]})})]})]}),e.jsx("div",{className:"desktop-sidebar-force bg-white border-r border-gray-200 shadow-lg w-60",style:{display:t?"flex":"none"},children:e.jsxs("div",{className:"flex flex-col flex-1 min-h-0 border-r border-gray-200 bg-white shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg flex items-center justify-center",style:{backgroundColor:l.primary.red},children:e.jsx("span",{className:"text-white font-bold text-sm",children:"G"})}),e.jsx("span",{className:"ml-2 text-lg font-bold text-gray-900",children:"G-LOVE ACADEMY"})]})}),e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:i.map(a=>{const f=a.icon;return e.jsxs(j,{href:a.href,className:`flex items-center px-2 py-2 text-sm font-medium rounded-md ${d(a.href)?"text-white":"text-gray-600 hover:bg-gray-100"}`,style:d(a.href)?{backgroundColor:l.primary.red}:{},children:[e.jsx(f,{className:"mr-3 h-5 w-5"}),a.name]},a.name)})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm",children:s!=null&&s.name?s.name.charAt(0).toUpperCase():"U"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:(s==null?void 0:s.name)||"Staff Member"}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(s==null?void 0:s.role)||"staff"})]}),e.jsx("button",{onClick:u,className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(N,{className:"h-5 w-5"})})]})})]})}),e.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[e.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[!t&&e.jsx("button",{className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset",style:{"--tw-ring-color":l.primary.red},onClick:()=>n(!0),children:e.jsx(U,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1 px-4 flex justify-between items-center",children:[e.jsx("div",{className:"flex-1 flex",children:e.jsx("div",{className:"w-full flex",children:e.jsx("div",{className:"relative w-full text-gray-400 focus-within:text-gray-600"})})}),e.jsx("div",{className:"ml-4 flex items-center",children:e.jsx("button",{className:"bg-white p-1 rounded-full text-gray-400 hover:text-gray-500",children:e.jsx(E,{className:"h-6 w-6"})})})]})]}),e.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:m})})})]}),e.jsx(B,{})]})};export{T as A,C as S,I as U};
